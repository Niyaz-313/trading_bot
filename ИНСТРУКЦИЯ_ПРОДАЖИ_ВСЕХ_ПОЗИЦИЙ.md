# üì§ –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ü–†–û–î–ê–ñ–ê –í–°–ï–• –ü–û–ó–ò–¶–ò–ô

## –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `sell_all_positions.py`:

```bash
python sell_all_positions.py
```

–°–∫—Ä–∏–ø—Ç:
1. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –≤–∞—à–∏ –ø–æ–∑–∏—Ü–∏–∏
2. ‚úÖ –ó–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
3. ‚úÖ –†–∞–∑–º–µ—Å—Ç–∏—Ç –∑–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
4. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Python –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ

–û—Ç–∫—Ä–æ–π—Ç–µ Python –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```python
from broker_api import BrokerAPI
from config import TINVEST_SANDBOX, BROKER, ENABLE_TRADING

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
paper_trading = TINVEST_SANDBOX if BROKER == 'tinvest' else True
broker = BrokerAPI(paper_trading=paper_trading)

# –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏
positions = broker.get_positions() or []
print(f"–ù–∞–π–¥–µ–Ω–æ –ø–æ–∑–∏—Ü–∏–π: {len(positions)}")

# –ü—Ä–æ–¥–∞–µ–º –∫–∞–∂–¥—É—é –ø–æ–∑–∏—Ü–∏—é
for pos in positions:
    symbol = pos.get('symbol', '?')
    qty_lots = int(pos.get('qty_lots', pos.get('qty', 0)) or 0)
    print(f"–ü—Ä–æ–¥–∞–∂–∞ {symbol}: {qty_lots} –ª–æ—Ç(–æ–≤)...")
    order = broker.place_market_order(symbol, qty_lots, 'sell')
    if order:
        print(f"‚úÖ –ó–∞—è–≤–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∞: {order.get('order_id', 'N/A')}")
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∑–∞—è–≤–∫–∏")
```

---

## –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Telegram –±–æ—Ç—É, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–µ–π.

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ ENABLE_TRADING**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ `ENABLE_TRADING=true`
2. **Sandbox vs Production**: –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.env` (TINVEST_SANDBOX)
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∂–µ–π
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—è–≤–æ–∫**: –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä–∞

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ T-Invest API –∏–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ü–æ—Ä—Ç—Ñ–µ–ª—å —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ (–∫–Ω–æ–ø–∫–∞ "–ü–æ—Ä—Ç—Ñ–µ–ª—å")
- –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ `trading_bot.log`





