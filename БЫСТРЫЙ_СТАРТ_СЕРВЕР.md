# БЫСТРЫЙ СТАРТ: РАЗВЕРТЫВАНИЕ НА СЕРВЕРЕ

## Краткая инструкция для быстрого развертывания

### ШАГ 1: Подготовка на локальной машине

1. **Настройте Git репозиторий:**
   ```bash
   cd "C:\Users\karim\OneDrive\Рабочий стол\Bot"
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   # Создайте репозиторий на GitHub и добавьте remote
   git remote add origin https://github.com/ваш_username/trading_bot.git
   git push -u origin main
   ```

2. **Используйте скрипт синхронизации:**
   - Запустите `sync_to_server.bat` для отправки изменений на сервер

### ШАГ 2: Настройка сервера

1. **Подключитесь к серверу:**
   ```bash
   ssh botuser@ваш_сервер_ip
   ```

2. **Запустите скрипт настройки:**
   ```bash
   # Скопируйте server_setup.sh на сервер
   scp server_setup.sh botuser@ваш_сервер_ip:~/server_setup.sh
   
   # На сервере
   chmod +x ~/server_setup.sh
   ~/server_setup.sh
   ```

3. **Клонируйте репозиторий:**
   ```bash
   cd ~/trading_bot
   git clone https://github.com/ваш_username/trading_bot.git .
   ```

4. **Настройте окружение:**
   ```bash
   python3.11 -m venv venv
   source venv/bin/activate
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

5. **Скопируйте .env:**
   ```bash
   # На локальной машине
   scp .env botuser@ваш_сервер_ip:~/trading_bot/.env
   ```

6. **Создайте systemd сервис:**
   ```bash
   # На сервере
   chmod +x ~/trading_bot/create_systemd_service.sh
   ~/trading_bot/create_systemd_service.sh
   ```

7. **Запустите бота:**
   ```bash
   sudo systemctl start trading-bot.service
   sudo systemctl status trading-bot.service
   ```

### ШАГ 3: Настройка автоматизации

1. **Настройте cron для обновлений:**
   ```bash
   chmod +x ~/trading_bot/server_update.sh
   chmod +x ~/trading_bot/server_backup.sh
   
   crontab -e
   # Добавьте:
   # 0 */6 * * * /home/botuser/trading_bot/server_update.sh >> /home/botuser/trading_bot/logs/update.log 2>&1
   # 0 3 * * * /home/botuser/trading_bot/server_backup.sh
   ```

### ШАГ 4: Проверка

1. **Проверьте статус:**
   ```bash
   sudo systemctl status trading-bot.service
   ```

2. **Проверьте логи:**
   ```bash
   tail -f ~/trading_bot/logs/trading_bot.log
   ```

3. **Проверьте через Telegram:**
   - Отправьте `/status` боту

---

## Ежедневная работа

### Обновление кода:

1. **На локальной машине:**
   - Внесите изменения
   - Запустите `sync_to_server.bat`

2. **На сервере (автоматически или вручную):**
   ```bash
   ~/trading_bot/server_update.sh
   ```

### Резервное копирование:

- **Автоматически:** каждый день в 3:00
- **Вручную:** запустите `backup_from_server.bat` на локальной машине

---

## Полезные команды

```bash
# Статус сервиса
sudo systemctl status trading-bot.service

# Перезапуск
sudo systemctl restart trading-bot.service

# Остановка
sudo systemctl stop trading-bot.service

# Логи
sudo journalctl -u trading-bot.service -f

# Просмотр логов файла
tail -f ~/trading_bot/logs/trading_bot.log
```


## Краткая инструкция для быстрого развертывания

### ШАГ 1: Подготовка на локальной машине

1. **Настройте Git репозиторий:**
   ```bash
   cd "C:\Users\karim\OneDrive\Рабочий стол\Bot"
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   # Создайте репозиторий на GitHub и добавьте remote
   git remote add origin https://github.com/ваш_username/trading_bot.git
   git push -u origin main
   ```

2. **Используйте скрипт синхронизации:**
   - Запустите `sync_to_server.bat` для отправки изменений на сервер

### ШАГ 2: Настройка сервера

1. **Подключитесь к серверу:**
   ```bash
   ssh botuser@ваш_сервер_ip
   ```

2. **Запустите скрипт настройки:**
   ```bash
   # Скопируйте server_setup.sh на сервер
   scp server_setup.sh botuser@ваш_сервер_ip:~/server_setup.sh
   
   # На сервере
   chmod +x ~/server_setup.sh
   ~/server_setup.sh
   ```

3. **Клонируйте репозиторий:**
   ```bash
   cd ~/trading_bot
   git clone https://github.com/ваш_username/trading_bot.git .
   ```

4. **Настройте окружение:**
   ```bash
   python3.11 -m venv venv
   source venv/bin/activate
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

5. **Скопируйте .env:**
   ```bash
   # На локальной машине
   scp .env botuser@ваш_сервер_ip:~/trading_bot/.env
   ```

6. **Создайте systemd сервис:**
   ```bash
   # На сервере
   chmod +x ~/trading_bot/create_systemd_service.sh
   ~/trading_bot/create_systemd_service.sh
   ```

7. **Запустите бота:**
   ```bash
   sudo systemctl start trading-bot.service
   sudo systemctl status trading-bot.service
   ```

### ШАГ 3: Настройка автоматизации

1. **Настройте cron для обновлений:**
   ```bash
   chmod +x ~/trading_bot/server_update.sh
   chmod +x ~/trading_bot/server_backup.sh
   
   crontab -e
   # Добавьте:
   # 0 */6 * * * /home/botuser/trading_bot/server_update.sh >> /home/botuser/trading_bot/logs/update.log 2>&1
   # 0 3 * * * /home/botuser/trading_bot/server_backup.sh
   ```

### ШАГ 4: Проверка

1. **Проверьте статус:**
   ```bash
   sudo systemctl status trading-bot.service
   ```

2. **Проверьте логи:**
   ```bash
   tail -f ~/trading_bot/logs/trading_bot.log
   ```

3. **Проверьте через Telegram:**
   - Отправьте `/status` боту

---

## Ежедневная работа

### Обновление кода:

1. **На локальной машине:**
   - Внесите изменения
   - Запустите `sync_to_server.bat`

2. **На сервере (автоматически или вручную):**
   ```bash
   ~/trading_bot/server_update.sh
   ```

### Резервное копирование:

- **Автоматически:** каждый день в 3:00
- **Вручную:** запустите `backup_from_server.bat` на локальной машине

---

## Полезные команды

```bash
# Статус сервиса
sudo systemctl status trading-bot.service

# Перезапуск
sudo systemctl restart trading-bot.service

# Остановка
sudo systemctl stop trading-bot.service

# Логи
sudo journalctl -u trading-bot.service -f

# Просмотр логов файла
tail -f ~/trading_bot/logs/trading_bot.log
```


## Краткая инструкция для быстрого развертывания

### ШАГ 1: Подготовка на локальной машине

1. **Настройте Git репозиторий:**
   ```bash
   cd "C:\Users\karim\OneDrive\Рабочий стол\Bot"
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   # Создайте репозиторий на GitHub и добавьте remote
   git remote add origin https://github.com/ваш_username/trading_bot.git
   git push -u origin main
   ```

2. **Используйте скрипт синхронизации:**
   - Запустите `sync_to_server.bat` для отправки изменений на сервер

### ШАГ 2: Настройка сервера

1. **Подключитесь к серверу:**
   ```bash
   ssh botuser@ваш_сервер_ip
   ```

2. **Запустите скрипт настройки:**
   ```bash
   # Скопируйте server_setup.sh на сервер
   scp server_setup.sh botuser@ваш_сервер_ip:~/server_setup.sh
   
   # На сервере
   chmod +x ~/server_setup.sh
   ~/server_setup.sh
   ```

3. **Клонируйте репозиторий:**
   ```bash
   cd ~/trading_bot
   git clone https://github.com/ваш_username/trading_bot.git .
   ```

4. **Настройте окружение:**
   ```bash
   python3.11 -m venv venv
   source venv/bin/activate
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

5. **Скопируйте .env:**
   ```bash
   # На локальной машине
   scp .env botuser@ваш_сервер_ip:~/trading_bot/.env
   ```

6. **Создайте systemd сервис:**
   ```bash
   # На сервере
   chmod +x ~/trading_bot/create_systemd_service.sh
   ~/trading_bot/create_systemd_service.sh
   ```

7. **Запустите бота:**
   ```bash
   sudo systemctl start trading-bot.service
   sudo systemctl status trading-bot.service
   ```

### ШАГ 3: Настройка автоматизации

1. **Настройте cron для обновлений:**
   ```bash
   chmod +x ~/trading_bot/server_update.sh
   chmod +x ~/trading_bot/server_backup.sh
   
   crontab -e
   # Добавьте:
   # 0 */6 * * * /home/botuser/trading_bot/server_update.sh >> /home/botuser/trading_bot/logs/update.log 2>&1
   # 0 3 * * * /home/botuser/trading_bot/server_backup.sh
   ```

### ШАГ 4: Проверка

1. **Проверьте статус:**
   ```bash
   sudo systemctl status trading-bot.service
   ```

2. **Проверьте логи:**
   ```bash
   tail -f ~/trading_bot/logs/trading_bot.log
   ```

3. **Проверьте через Telegram:**
   - Отправьте `/status` боту

---

## Ежедневная работа

### Обновление кода:

1. **На локальной машине:**
   - Внесите изменения
   - Запустите `sync_to_server.bat`

2. **На сервере (автоматически или вручную):**
   ```bash
   ~/trading_bot/server_update.sh
   ```

### Резервное копирование:

- **Автоматически:** каждый день в 3:00
- **Вручную:** запустите `backup_from_server.bat` на локальной машине

---

## Полезные команды

```bash
# Статус сервиса
sudo systemctl status trading-bot.service

# Перезапуск
sudo systemctl restart trading-bot.service

# Остановка
sudo systemctl stop trading-bot.service

# Логи
sudo journalctl -u trading-bot.service -f

# Просмотр логов файла
tail -f ~/trading_bot/logs/trading_bot.log
```




